<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ASHA Health Portal</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
.content-section{transition:opacity 0.3s;}
.card-hover:hover{transform:translateY(-5px);box-shadow:0 10px 15px rgba(0,0,0,0.1);transition:all 0.3s;}
.sos-hover:hover{transform:scale(1.1);transition:all 0.3s;}
.carousel-inner img{height:250px;object-fit:cover;}
@keyframes slide{0%{transform:translateX(100%);}100%{transform:translateX(-100%);}}
.animate-slide{display:inline-block;animation:slide 15s linear infinite;}


/* ---------- General Body & Fonts ---------- */
body {
    font-family: 'Poppins', sans-serif;
    background: linear-gradient(to right, #0aeeee, #00f020);
    transition: all 0.3s ease-in-out;
}

/* ---------- Cards ---------- */
.card-hover {
    background: linear-gradient(135deg, #6bc8d6, #fda085);
    color: #dd1f1f;
    border: none;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
}
.card-hover:hover {
    transform: translateY(-10px);
    box-shadow: 0 20px 25px rgba(0,0,0,0.2);
}

/* ---------- Buttons ---------- */
button {
    transition: all 0.3s ease;
    font-weight: 600;
    background: linear-gradient(to right, #ff758c, #ff7eb3);
    color: white;
}
button:hover {
    transform: scale(1.05);
    box-shadow: 0 10px 15px rgba(0,0,0,0.3);
}

/* ---------- Navbar ---------- */
nav {
    background: linear-gradient(to right, #667eea, #764ba2);
}
.nav-link {
    transition: all 0.3s ease;
}
.nav-link:hover {
    background: linear-gradient(to right, #ff9966, #ff5e62);
    color: white;
}

/* ---------- Carousel ---------- */
.carousel-inner img {
    border-radius: 12px;
    box-shadow: 0 8px 15px rgba(0,0,0,0.2);
    transition: transform 0.5s ease;
}
.carousel-inner img:hover {
    transform: scale(1.05);
}

/* ---------- Red Scrolling Alert ---------- */
.alert-text {
    color: #fff;
    font-weight: bold;
    font-size: 1.1rem;
}
.animate-slide {
    display: inline-block;
    white-space: nowrap;
    animation: slide 15s linear infinite;
}
@keyframes slide {
    0% {transform: translateX(100%);}
    100% {transform: translateX(-100%);}
}

/* ---------- Sections ---------- */
.content-section {
    background: linear-gradient(to right, #04ddfa, #c2e9fb);
    border-radius: 15px;
    padding: 1.5rem;
    box-shadow: 0 10px 20px rgba(0,0,0,0.1);
    transition: all 0.4s ease;
}

/* ---------- Inputs ---------- */
input, select, textarea {
    border-radius: 10px;
    border: 1px solid #ddd;
    padding: 0.5rem;
    transition: all 0.3s ease;
}
input:focus, select:focus, textarea:focus {
    outline: none;
    border-color: #ff758c;
    box-shadow: 0 0 8px rgba(255,117,140,0.5);
}

/* ---------- SOS Button ---------- */
.sos-hover {
    background: linear-gradient(135deg, #ff416c, #ff4b2b);
    color: white;
    box-shadow: 0 10px 20px rgba(0,0,0,0.3);
}
.sos-hover:hover {
    transform: scale(1.2);
    box-shadow: 0 15px 25px rgba(0,0,0,0.4);
}

/* ---------- Text Colors ---------- */
h2,h3 {
    background: linear-gradient(to right, #f60404, #020202);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
}

/* ---------- Rainbow Borders ---------- */
#patientDetails, #medicalEntryForm, #healthRecordsSection, #surveySection, #remindersSection {
    border-image: linear-gradient(to right, #ff5f6d, #ffc371, #47cacc, #6a11cb, #f7971e) 1;
}

/* ---------- Responsive adjustments ---------- */
@media (max-width:768px){
    nav { flex-direction: column; }
    .carousel-inner img { height: 200px; }
    .content-section { padding: 1rem; }
}

</style>
z


</style>
</head>
<body class="bg-gray-100 font-sans">

<nav class="bg-gray-800 text-white shadow-lg sticky top-0 z-50">
<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex items-center justify-between h-16">
<span class="font-bold text-xl">ASHA Health Portal</span>
<div class="md:hidden">
<button id="mobileMenuBtn">☰</button>
</div>
<div class="hidden md:flex space-x-4" id="desktopMenu">
<a href="#" class="nav-link px-3 py-2 rounded-md text-sm font-medium" data-target="homeSection">🏠 Home</a>
<a href="#" class="nav-link px-3 py-2 rounded-md text-sm font-medium" data-target="ehrSection">📝 ABHA Integration</a>
<a href="#" class="nav-link px-3 py-2 rounded-md text-sm font-medium" data-target="healthRecordsSection">📄 Health Records</a>
<a href="#" class="nav-link px-3 py-2 rounded-md text-sm font-medium" data-target="surveySection">📊 Survey</a>
<a href="#" class="nav-link px-3 py-2 rounded-md text-sm font-medium" data-target="remindersSection">💉 Reminders</a>
</div>
</div>
<div class="md:hidden hidden" id="mobileMenu">
<a href="#" class="block px-4 py-2 nav-link" data-target="homeSection">🏠 Home</a>
<a href="#" class="block px-4 py-2 nav-link" data-target="ehrSection">📝 ABHA Integration</a>
<a href="#" class="block px-4 py-2 nav-link" data-target="healthRecordsSection">📄 Health Records</a>
<a href="#" class="block px-4 py-2 nav-link" data-target="surveySection">📊 Survey</a>
<a href="#" class="block px-4 py-2 nav-link" data-target="remindersSection">💉 Reminders</a>
</div>
</nav>

<main class="p-4 md:p-8">

<!-- Home Section -->
<div id="homeSection" class="content-section bg-white p-6 rounded-lg shadow-md mb-8">
<h2 class="text-2xl font-bold text-gray-800 mb-4">Welcome, ASHA Worker!</h2>
<!-- Carousel -->
<div class="carousel relative mb-4 overflow-hidden rounded-lg shadow-md">
<div class="carousel-inner flex transition-transform duration-700 ease-in-out" id="carouselInner">
<img src="https://via.placeholder.com/800x300?text=Image+1" class="w-full flex-shrink-0 rounded-md">
<img src="https://via.placeholder.com/800x300?text=Image+2" class="w-full flex-shrink-0 rounded-md">
<img src="https://via.placeholder.com/800x300?text=Image+3" class="w-full flex-shrink-0 rounded-md">
</div>
</div>

<!-- Red Alert -->
<div class="bg-red-600 text-white p-3 rounded-md mb-6 overflow-hidden relative">
<div class="alert-text whitespace-nowrap animate-slide" id="alertText">
⚠️ Emergency Vaccination Drive Tomorrow at 10 AM. All ASHA workers must attend! ⚠️
</div>
</div>


<p class="text-gray-600 mb-6">Manage community health records efficiently. Select an option below.</p>

<div class="grid grid-cols-1 md:grid-cols-2 gap-4">
<div class="bg-blue-50 border border-blue-200 p-4 rounded-lg card-hover cursor-pointer" onclick="showSection('ehrSection')">
<h3 class="font-bold text-blue-800">📝 ABHA Integration</h3>
<p class="text-sm text-blue-700 mt-1">Fetch and update health records using ABHA number.</p>
</div>
<div class="bg-indigo-50 border border-indigo-200 p-4 rounded-lg card-hover cursor-pointer" onclick="showSection('healthRecordsSection')">
<h3 class="font-bold text-indigo-800">📄 View Health Records</h3>
<p class="text-sm text-indigo-700 mt-1">Browse and search patient records with diseases and notifications.</p>
</div>
<div class="bg-green-50 border border-green-200 p-4 rounded-lg card-hover cursor-pointer" onclick="showSection('surveySection')">
<h3 class="font-bold text-green-800">📊 Surveys</h3>
<p class="text-sm text-green-700 mt-1">Submit malnutrition or vaccination follow-up surveys.</p>
</div>
</div>
</div>

<!-- ABHA Section -->
<div id="ehrSection" class="content-section bg-white p-6 rounded-lg shadow-md mb-8 hidden">
<h2 class="text-xl font-bold text-gray-700 mb-4">📝 ABHA Health Record</h2>
<input id="abhaNumberInput" placeholder="Enter ABHA Number" class="w-full p-2 border border-gray-300 rounded-md mb-2">
<button onclick="fetchAbhaRecord()" class="w-full bg-blue-600 text-white py-2 rounded-md mb-4">Fetch Record</button>

<div id="patientDetails" class="p-4 border border-gray-300 rounded-md bg-gray-50 hidden">
<p id="patientName"></p>
<p id="patientGender"></p>
<div id="patientDiseases" class="mt-2"></div>
</div>

<button id="newEntryBtn" onclick="showMedicalEntryForm()" class="w-full bg-green-600 text-white py-2 rounded-md hidden mb-4">Add New Disease Entry</button>
</div>

<!-- Medical Entry -->
<div id="medicalEntryForm" class="content-section bg-white p-6 rounded-lg shadow-md mb-8 hidden">
<h2 class="text-xl font-bold text-gray-700 mb-4">Add New Disease / Vitals</h2>
<form id="newMedicalEntryForm">
<input name="problem_name" placeholder="Disease Name" required class="w-full p-2 border border-gray-300 rounded-md mb-2">
<textarea name="problem_description" placeholder="Description" required class="w-full p-2 border border-gray-300 rounded-md mb-2"></textarea>
<div class="flex gap-2 mb-2">
<input name="vitals_bp" placeholder="BP" class="w-full p-2 border border-gray-300 rounded-md">
<input name="vitals_temp" placeholder="Temp" class="w-full p-2 border border-gray-300 rounded-md">
</div>
<button type="submit" class="w-full bg-blue-600 text-white py-2 rounded-md">Save Entry</button>
</form>
</div>

<!-- Health Records Section -->
<div id="healthRecordsSection" class="content-section bg-white p-6 rounded-lg shadow-md mb-8 hidden">
<h2 class="text-xl font-bold text-gray-700 mb-4">📄 Health Records</h2>
<button onclick="loadHealthRecords()" class="w-full bg-teal-600 text-white py-2 rounded-md mb-4">Load Records</button>
<div id="healthRecordList" class="space-y-4"></div>
</div>

<!-- Survey Section -->
<div id="surveySection" class="content-section bg-white p-6 rounded-lg shadow-md mb-8 hidden">
<h2 class="text-xl font-bold text-gray-700 mb-4">📊 Surveys</h2>
<select id="surveyType" class="w-full p-2 border border-gray-300 rounded-md mb-2">
<option value="malnutrition">Malnutrition Survey</option>
<option value="vaccination">Vaccination Follow-up</option>
</select>
<form id="surveyForm">
<input name="child_name" placeholder="Child Name" required class="w-full p-2 border border-gray-300 rounded-md mb-2">
<input name="weight" type="number" placeholder="Weight (kg)" class="w-full p-2 border border-gray-300 rounded-md mb-2">
<input name="height" type="number" placeholder="Height (cm)" class="w-full p-2 border border-gray-300 rounded-md mb-2">
<button type="submit" class="w-full bg-green-600 text-white py-2 rounded-md">Submit Survey</button>
</form>
</div>

<!-- Reminders Section -->
<div id="remindersSection" class="content-section bg-white p-6 rounded-lg shadow-md mb-8 hidden">
<h2 class="text-xl font-bold text-gray-700 mb-4">💉 Vaccination Reminders</h2>
<button onclick="loadReminders()" class="w-full bg-indigo-600 text-white py-2 rounded-md mb-4">Load Reminders</button>
<ul id="reminderList" class="space-y-2"></ul>
</div>

</main>

<button onclick="triggerSOS()" class="fixed bottom-6 right-6 bg-red-600 text-white w-16 h-16 rounded-full flex items-center justify-center sos-hover">SOS</button>

<script>
let currentAbhaNumber = null;

// ---------- Mobile Menu ----------
const mobileBtn = document.getElementById('mobileMenuBtn');
const mobileMenu = document.getElementById('mobileMenu');
mobileBtn.onclick = ()=>{mobileMenu.classList.toggle('hidden');};

// ---------- Navigation ----------
const navLinks = document.querySelectorAll('.nav-link');
const contentSections = document.querySelectorAll('.content-section');
function showSection(id){
contentSections.forEach(s=>s.classList.add('hidden'));
document.getElementById(id).classList.remove('hidden');
navLinks.forEach(l=>{
if(l.dataset.target===id){l.classList.add('bg-gray-900','text-white');l.classList.remove('text-gray-300','hover:bg-gray-700');}
else{l.classList.remove('bg-gray-900','text-white');l.classList.add('text-gray-300','hover:bg-gray-700');}
});
}
navLinks.forEach(l=>l.addEventListener('click',e=>{e.preventDefault(); showSection(l.dataset.target);}));
showSection('homeSection');

// ---------- Carousel ----------
let carouselIndex=0;
setInterval(()=>{carouselIndex=(carouselIndex+1)%3; document.getElementById('carouselInner').style.transform=`translateX(-${carouselIndex*100}%)`;},3000);

// ---------- ABHA ----------
async function fetchAbhaRecord(){
const abha = document.getElementById('abhaNumberInput').value;
if(!abha){alert("Enter ABHA Number");return;}
currentAbhaNumber = abha;
// Fetch from server (simulate)
const res = await fetch('/load_ehr');
const data = await res.json();
const patient = data.find(p=>p.abha_number===abha) || {name:'Suresh Kumar',gender:'Male',diseases:[]};
document.getElementById('patientName').textContent = "Name: "+patient.name;
document.getElementById('patientGender').textContent = "Gender: "+patient.gender;

const diseasesDiv = document.getElementById('patientDiseases');
diseasesDiv.innerHTML = '';
if(patient.diseases){
patient.diseases.forEach(d=>{
const dEl = document.createElement('p');
dEl.textContent = `${d.problem_name} (${d.date}) - ${d.problem_description}`;
diseasesDiv.appendChild(dEl);
// Notifications
if(new Date(d.date).toDateString()===new Date().toDateString()){notify(`Follow-up: ${d.problem_name}`);}
});
}

document.getElementById('patientDetails').classList.remove('hidden');
document.getElementById('newEntryBtn').classList.remove('hidden');
}

// ---------- Medical Entry ----------
function showMedicalEntryForm(){showSection('medicalEntryForm');}
document.getElementById('newMedicalEntryForm').onsubmit=async e=>{
e.preventDefault();
const formData=Object.fromEntries(new FormData(e.target).entries());
formData.abha_number = currentAbhaNumber;
await fetch('/save_ehr',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(formData)});
alert('✅ Medical entry saved!');
e.target.reset();
showSection('ehrSection');
}

// ---------- Health Records ----------
async function loadHealthRecords(){
const res=await fetch('/load_ehr');
const data=await res.json();
const list=document.getElementById('healthRecordList');
list.innerHTML='';
data.forEach(p=>{
const diseases = p.diseases ? p.diseases.map(d=>`${d.problem_name} (${d.date})`).join(', ') : 'None';
const html = `<div class="bg-gray-100 p-4 rounded-lg border"><h3 class="font-semibold">${p.name}</h3><p>ABHA: ${p.abha_number} | Gender: ${p.gender}</p><p>Diseases: ${diseases}</p></div>`;
list.innerHTML+=html;
});
}

// ---------- Survey ----------
document.getElementById('surveyForm').onsubmit=async e=>{
e.preventDefault();
const data=Object.fromEntries(new FormData(e.target).entries());
data.type = document.getElementById('surveyType').value;
await fetch('/save_survey',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(data)});
alert('✅ Survey submitted!');
e.target.reset();
}

// ---------- Reminders ----------
async function loadReminders(){
const res = await fetch('/vaccination_reminders');
const data = await res.json();
const list = document.getElementById('reminderList');
list.innerHTML = '';
data.forEach(r=>{
list.innerHTML += `<li class="bg-gray-100 p-3 rounded-md border">${r.name}: <strong>${r.date}</strong></li>`;
if(new Date(r.date).toDateString()===new Date().toDateString()){notify(`Vaccination Reminder: ${r.name}`);}
});
}

// ---------- SOS ----------
function triggerSOS(){alert('🚨 Emergency alert sent!');}

// ---------- Notifications ----------
function notify(message){
if(Notification.permission==='granted'){new Notification(message);}
else if(Notification.permission!=='denied'){Notification.requestPermission().then(p=>{if(p==='granted') new Notification(message);});}
}
</script>
</body>
</html>
